* これは何

Emacs向けのはてなダイアリーモード．

* 特徴 / 他のモードとの違い

似たような拡張として，hatena-mode.elやsimple-hatena-mode.elなど，何種類かあるみたい．
(恐らく)これらのモードとの違いは，次のようなものになると思う．

- elispのみで記述されているためインストールが(たぶん)簡単
- はてなダイアリーAtomPubを利用している

* 機能

現在実装している機能は以下の通り．

- はてなダイアリー
  - 記事の投稿 / 更新 / 削除  / 一覧を見る
  - 下書きの投稿 / 更新 / 削除 / 一覧を見る / 下書きを記事として投稿する

* 使い方

** インストール / 設定

ファイルをPATHの通る場所に置いて，.emacsに (require 'ya-hatena) と記述する．
はてなのアカウントを ~*yhtn:account-info-file*~ に記述する．デフォルトでは "~/.yhtn:account-info.el" である．

: (setq yhtn:username "hatena_taro")
: (setq yhtn:passwd "thisispasswd")

** 最初の一歩

メニューを表示するには以下のコマンドを実行．

: M-x ya-hatena

Anytingが起動し，以下の項目が表示される．

- はてなダイアリー : 新しく日記を書く
- はてなダイアリー : 日記一覧を見る
- はてなダイアリー : 下書き一覧を見る

** はてなダイアリー : 新しく日記を書く

空のバッファが作成され，編集モードとなる．

** はてなダイアリー : 日記一覧を見る

Anythingによって，日記の一覧が表示される．

TABキーで，選択している記事に対する操作を選択，実行することができる．可能な操作は以下の通り．

- View: 日記を閲覧する(閲覧モードを参照)
- Edit: 日記を編集する(編集モードを参照)
- Delete: 日記を削除

デフォルトのアクションはView．

** はてなダイアリー : 下書き一覧を見る

Anythingによって，日記の一覧が表示される．

TABキーで，選択している記事に対する操作を選択，実行することができる．可能な操作は以下の通り．

- View: 日記を閲覧する(閲覧モードを参照)
- Edit: 日記を編集する(編集モードを参照)
- Delete: 日記を削除
- Publish: 下書きを公開する

デフォルトのアクションはView．

** 閲覧モード

記事の閲覧モード．バッファを編集することはできない．\C-c q で閲覧を終了する．

** 編集モード

1行目に記事のタイトルを書く．

: *記事のタイトル

2行目から，記事の本文となる．

編集時に使えるコマンドは以下の通り．\C-c mでAnythingによる操作を行うことができる．

|--------+------------------------------------------+-------------------------------------|
| キー   | コマンド                                 | 関数                                |
|--------+------------------------------------------+-------------------------------------|
| \C-c m | 操作メニューを表示する                   | yhtn:d:action                       |
|--------+------------------------------------------+-------------------------------------|
| \C-c p | 記事をはてなダイアリーに投稿する         | yhtn:d:post-blog-collection-buffer  |
|--------+------------------------------------------+-------------------------------------|
| \C-c d | 記事を下書きとして保存する               | yhtn:d:post-draft-collection-buffer |
|--------+------------------------------------------+-------------------------------------|
| \C-c q | 編集を終了する(書いた内容は保存されない) | yhtn:d:quit                         |
|--------+------------------------------------------+-------------------------------------|


* TODO

現時点で実装したい機能は以下の通り．

** TODO アカウントとパスワードを暗号化して保存する
** はてなダイアリー
*** TODO はてな記法の入力支援，色付け(hatenahelper-modeを利用すればよさそう)
*** TODO 記事中の画像のはてなフォトライフへの同時投稿
*** TODO ローカルとの同期
** はてなフォトライフ
    
